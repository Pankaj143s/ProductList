<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="style.css" />
    <!-- Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
      rel="stylesheet"
    />
    <!-- icon cdn -->
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@4.3.0/fonts/remixicon.css"
      rel="stylesheet"
    />
    <script type="module">
      import productList from "./productList.js";
      window.productList = productList;
    </script>
    <script>
      let SelectedProducts =
        JSON.parse(localStorage.getItem("SelectedProducts")) || [];

      function AddToCart(index, button) {
        console.log(SelectedProducts);

        // Add the passed value to the global array
        SelectedProducts.push(index);

        // Save to localStorage
        localStorage.setItem(
          "SelectedProducts",
          JSON.stringify(SelectedProducts)
        );

        // Update the button to "Show Cart"
        button.innerHTML = "<h1>Show Cart</h1>";
        button.onclick = function () {
          window.location.href = "cart.html";
        };

        // Show alert and update product count
        window.alert(
          "Product Added to cart. Total Products: " + SelectedProducts.length
        );
        updateProductCount();
      }

      function updateProductCount() {
        const productCountElement = document.getElementById("product-count");

        if (productCountElement) {
          productCountElement.textContent = SelectedProducts.length;
        } else {
          console.error('Element with ID "product-count" not found.');
        }
      }

      window.onload = updateProductCount;

      function ClearCart() {
        localStorage.clear();
        SelectedProducts = [];
        window.alert("Cart is Cleared");
        updateProductCount();
      }
    </script>
    <title>Document</title>
  </head>

  <body>
    <aside id="sidebar">
      <div class="sidebar-container">
        <div class="logo">
          <img src="logo.jpeg" alt="" />
          <h2 class="sidebar-title">Sidebar Title</h2>
        </div>
        <ul class="links">
          <li>
            <span><i class="ri-list-view"></i></span><a href="">Product-list</a>
          </li>
          <li>
            <span><i class="ri-play-circle-fill"></i></span
            ><a href="">Product-slider</a>
          </li>
          <li>
            <span><i class="ri-file-list-fill"></i></span
            ><a href="">Product-category-list</a>
          </li>
          <li>
            <span><i class="ri-file-add-fill"></i></span
            ><a href="cart.html">Add-to-cart-button</a>
          </li>
          <li onclick="window.location.href = 'cart.html';">
            <span><i class="ri-shopping-cart-fill"></i></span
            ><a href="#" onclick="window.location.href = 'cart.html';">Cart</a>
          </li>
          <h3 id="product-count"></h3>
          <button onclick="ClearCart()">Clear Cart</button>
        </ul>
      </div>
    </aside>

    <main>
      <!-- -------------------- component-one -------------------- -->
      <section id="content-one">
        <div class="card-heading">
          <h5>Two layout types</h5>
          <h6>Choose your style</h6>
        </div>
        <div class="card-container" id="card-container">
          <script type="module">
            const Products = window.productList.slice(0, 6);
            const cardContainer = document.getElementById("card-container");
            Products.forEach((product, index) => {
              const card = document.createElement("div");
              card.className = "card";
              card.innerHTML = `
                <div class="card-img">
                    <img src="${product.img}" alt="${product.title}" />
                    <a href="#" class="cart-btn" onclick="AddToCart(${index}, this); return false;"><h1>Add to cart</h1></a>
                </div>
                <div class="card-title">
                    <h1>${product.title}</h1>
                    <h1>$${product.price}</h1>
                </div>
                <div class="card-category"><h1>${product.category}</h1></div>
            `;
              cardContainer.appendChild(card);
            });
          </script>
        </div>
      </section>

      <!-- -------------------- component-two -------------------- -->
      <section id="content-two">
        <div class="card-two-container" id="card-two-container">
          <script type="module">
            const Products2 = window.productList.slice(6, 13);
            const cardContainer2 =
              document.getElementById("card-two-container");
            Products2.forEach((product, index) => {
              const card = document.createElement("div");
              card.className = "card";
              card.innerHTML = `
                <div class="card-img">
                    <img src="${product.img}" alt="${product.title}" />
                    <div class="cart-btn">
                      <i class="ri-calendar-line"></i>
                      <a href="#"  onclick="AddToCart(${
                        index + 6
                      }, this); return false;"><h1>Add to cart</h1></a>
                    </div>
                </div>
                <div class="card-title">
                    <h1>${product.title}</h1>
                    <h1>$${product.price}</h1>
                </div>
                <div class="card-category"><h1>${product.category}</h1></div>
            `;
              cardContainer2.appendChild(card);
            });
          </script>
        </div>
      </section>

      <!-- -------------------- component-three -------------------- -->
      <section id="content-three">
        <div class="card-heading">
          <h6>Adapt list columns for different devices</h6>
          <h5>Responsive Settings</h5>
        </div>
        <div class="card-container-t" id="card-container-t">
          <script type="module">
            const Products3 = window.productList.slice(13, 17);
            const cardContainer3 = document.getElementById("card-container-t");
            Products3.forEach((product, index) => {
              const card = document.createElement("div");
              card.className = "card-t";
              card.innerHTML = `
                <div class="card-img">
                    <img src="${product.img}" alt="${product.title}" />
                </div>
                <div class="card-three-title">
                    <h1>${product.title}</h1>
                    <h4>$${product.price}</h4>
                    <h4 class="add-c" onclick="AddToCart(${
                      index + 13
                    }, this); return false;">Add to cart</h4>
                </div>
                <div class="card-category"><h1>${product.category}</h1></div>
            `;
              cardContainer3.appendChild(card);
            });
          </script>
        </div>
      </section>

      <!-- -------------------- component-four(named 5)-------------------- -->
      <section id="content-five">
        <div class="card-container" id="card-container5">
          <script type="module">
            const Products5 = window.productList.slice(17, 21);
            const cardContainer5 = document.getElementById("card-container5");
            Products5.forEach((product, index) => {
              const card = document.createElement("div");
              card.className = "card";
              card.innerHTML = `
                <div class="card-image">
                    <img src="${product.img}" alt="${product.title}" />
                </div>
                <div class="card-content">
                    <h1>${product.title}</h1>
                    <h4>$${product.price}</h4>
                    <div class="stars">
                      <i class="ri-star-s-fill"></i>
                      <i class="ri-star-s-fill"></i>
                      <i class="ri-star-s-fill"></i>
                      <i class="ri-star-s-fill"></i>
                      <i class="ri-star-s-fill"></i>
                    </div>
                    <button class="btn" onclick="AddToCart(${
                      index + 17
                    }, this); return false;">
                      <span class="btn-text ">Add to cart</span>
                    </button>
                </div>
            `;
              cardContainer5.appendChild(card);
            });
          </script>
        </div>
      </section>
    </main>
  </body>
</html>
